{% extends "layout.peb" %}

{% block title %}Nouveau message - UGE Webmail{% endblock %}

{% block content %}
<div class="mail-layout">
    <!-- Sidebar -->
    <aside class="sidebar">
        <a href="/mail/inbox" class="btn btn-secondary btn-compose">â† Retour</a>
        
        <nav class="folder-nav">
            <a href="/mail/inbox" class="folder-link">ğŸ“¥ BoÃ®te de rÃ©ception</a>
            <a href="/mail/outbox" class="folder-link">ğŸ“¤ Messages envoyÃ©s</a>
            <a href="/mail/drafts" class="folder-link">ğŸ“ Brouillons</a>
            <a href="/mail/trash" class="folder-link">ğŸ—‘ï¸ Corbeille</a>
        </nav>
    </aside>
    
    <!-- Main content -->
    <div class="mail-content">
        <h1>âœï¸ {% if draftId is not empty %}Modifier le brouillon{% else %}Nouveau message{% endif %}</h1>
        
        {% if error is not empty %}
        <div class="alert alert-error">{{ error }}</div>
        {% endif %}
        
        <form method="post" action="/mail/compose" enctype="multipart/form-data" class="compose-form">
            {% if draftId is not empty %}
            <input type="hidden" name="draftId" value="{{ draftId }}">
            {% endif %}
            
            <div class="form-group">
                <label for="to">Ã€ (destinataires)</label>
                <input type="text" id="to" name="to" value="{{ to }}" required
                       placeholder="SÃ©parez les destinataires par des virgules">
                <small>Seuls les utilisateurs de ce service peuvent recevoir des messages.</small>
            </div>
            
            <div class="form-group">
                <label for="subject">Sujet</label>
                <input type="text" id="subject" name="subject" value="{{ subject }}"
                       placeholder="Objet du message">
            </div>
            
            <div class="form-group">
                <label for="content">Message</label>
                <textarea id="content" name="content" rows="15" 
                          placeholder="RÃ©digez votre message...">{{ content }}</textarea>
            </div>
            
            <div class="form-group">
                <label for="attachments">PiÃ¨ces jointes</label>
                <input type="file" id="attachments" name="attachments" multiple>
                <small>Vous pouvez sÃ©lectionner plusieurs fichiers. Taille max : 50 MB au total.</small>
            </div>
            
            <div class="form-actions">
                <button type="submit" name="action" value="send" class="btn btn-primary">
                    ğŸ“¤ Envoyer
                </button>
                <button type="submit" name="action" value="draft" class="btn btn-secondary">
                    ğŸ’¾ Sauvegarder comme brouillon
                </button>
                <a href="/mail/inbox" class="btn btn-link">Annuler</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
